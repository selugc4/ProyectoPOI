import{a as k}from"./chunk-FAHOTJLB.js";import{c as i,g as b,i as g,oa as r,pa as f,qa as $}from"./chunk-QZTLQ5IH.js";import{g as d}from"./chunk-OLRFWS6T.js";var F=(()=>{let n=class n{constructor(){this.baseUrl="https://twm-a0gahqe6exa7fxh6.westeurope-01.azurewebsites.net/locations/",this.http=g($),this.authService=g(k)}getAllLocations(){return this.http.get(this.baseUrl)}searchLocations(t){let e=new f;return t.name&&(e=e.set("name",t.name)),t.date&&(e=e.set("date",t.date)),t.region&&(e=e.set("region",t.region)),this.http.get(this.baseUrl,{params:e})}getLocationById(t){return this.http.get(`${this.baseUrl}${t}`)}addReview(t,e){let o=`${this.baseUrl}${t}/reviews`;return this.http.post(o,e)}addReviewLogged(t,e){let o=`${this.baseUrl}${t}/reviews`;return this.http.post(o,e)}deleteReview(t,e){return d(this,null,function*(){let o=yield this.authService.getFirebaseIdToken();if(!o)throw new Error("No se pudo obtener el token de Firebase");let a=`${this.baseUrl}login`,h=new r({"Content-Type":"application/json"}),p={firebaseToken:o},s=(yield i(this.http.post(a,p,{headers:h}))).token;if(!s)throw new Error("No se recibi\xF3 token personalizado");let c=`${this.baseUrl}${t}/reviews/${e}`,u=new r().set("Authorization",`Bearer ${s}`);return yield i(this.http.delete(c,{headers:u}))})}updateLocation(t,e){return d(this,null,function*(){let o=yield this.authService.getFirebaseIdToken();if(!o)throw new Error("No se pudo obtener el token de Firebase");let a=`${this.baseUrl}login`,h=new r({"Content-Type":"application/json"}),p={firebaseToken:o},s=(yield i(this.http.post(a,p,{headers:h}))).token;if(!s)throw new Error("No se recibi\xF3 token personalizado");let c=`${this.baseUrl}${e}`,u=s?new r().set("Authorization",`Bearer ${s}`):void 0;return yield i(this.http.put(c,t,{headers:u}))})}deleteLocation(t){return d(this,null,function*(){let e=yield this.authService.getFirebaseIdToken();if(!e)throw new Error("No se pudo obtener el token de Firebase");let o=`${this.baseUrl}login`,a=new r({"Content-Type":"application/json"}),h={firebaseToken:e},l=(yield i(this.http.post(o,h,{headers:a}))).token;if(!l)throw new Error("No se recibi\xF3 token personalizado");let s=`${this.baseUrl}${t}`,c=l?new r().set("Authorization",`Bearer ${l}`):void 0;return yield i(this.http.delete(s,{headers:c}))})}};n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"});let w=n;return w})();export{F as a};
