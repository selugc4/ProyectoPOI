import{a as H}from"./chunk-OMEQORPI.js";import{Ab as j,Ba as _,Da as u,Db as z,Ea as E,Eb as B,Fa as S,G as m,Ga as M,H as i,I as t,Ia as b,J as h,Ka as N,La as T,Ma as L,O as C,Qa as P,Ra as k,X as a,e as v,hb as D,i as d,ka as x,na as F,nb as G,pb as R,qb as O,rb as V,t as c,ta as I,w,wa as y,yb as q,z as f,zb as A}from"./chunk-M5FVIQMQ.js";import"./chunk-UDHHHPKJ.js";import"./chunk-JSQDAY7T.js";import"./chunk-PAAW3VWM.js";import"./chunk-VU72VQEI.js";import"./chunk-BU6F7OWR.js";import"./chunk-JZYWOUJL.js";import"./chunk-WHJRDKSF.js";import"./chunk-4U6PRYVA.js";import"./chunk-LB2OG3QI.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{g}from"./chunk-OLRFWS6T.js";function W(l,r){l&1&&(i(0,"ion-text",10),a(1," Ingresa un correo v\xE1lido. "),t())}function J(l,r){l&1&&(i(0,"ion-text",10),a(1," La contrase\xF1a debe tener al menos 6 caracteres. "),t())}var ie=(()=>{let r=class r{constructor(){this.authService=d(H),this.toastController=d(B),this.loadingController=d(z),this.router=d(y),this.loginForm=new M({email:new b("",[u.required,u.email]),password:new b("",[u.required,u.minLength(6)])})}ngOnInit(){this.router.events.pipe(v(e=>e instanceof I)).subscribe(e=>{e.url.startsWith("/login")||this.resetFields()})}login(){return g(this,null,function*(){if(this.loginForm.invalid){this.showErrorMessage("Por favor, completa los campos correctamente.");return}let e=yield this.loadingController.create({message:"Iniciando sesi\xF3n...",spinner:"crescent",duration:2e3});yield e.present();let{email:o,password:n}=this.loginForm.value;try{yield this.authService.login(o,n),this.showInfoMessage("Inicio de sesi\xF3n realizado. Redirigiendo..."),setTimeout(()=>{this.router.navigate(["/list"])},2e3)}catch(s){this.showErrorMessage("Error en la autenticaci\xF3n: "+s.message)}finally{e.dismiss()}})}showErrorMessage(e){return g(this,null,function*(){(yield this.toastController.create({message:e,duration:3e3,position:"bottom",color:"danger"})).present()})}showInfoMessage(e){return g(this,null,function*(){(yield this.toastController.create({message:e,duration:2e3,position:"bottom",color:"success"})).present()})}resetFields(){this.loginForm.reset()}};r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=w({type:r,selectors:[["app-login"]],decls:22,vars:6,consts:[[3,"translucent"],[3,"fullscreen"],[1,"search-container"],[1,"transparent-form",3,"ngSubmit","formGroup"],[1,"transparent-form"],["position","stacked"],["type","email","formControlName","email","ngDefaultControl","",1,"transparent-form"],["color","danger",4,"ngIf"],["type","password","formControlName","password","ngDefaultControl",""],["expand","full","type","submit",1,"button2",3,"disabled"],["color","danger"]],template:function(o,n){if(o&1&&(i(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),a(3,"login"),t()()(),i(4,"ion-content",1)(5,"div",2)(6,"form",3),C("ngSubmit",function(){return n.login()}),i(7,"h3")(8,"strong"),a(9,"Inicia sesi\xF3n"),t()(),i(10,"ion-item",4)(11,"ion-label",5),a(12,"Email"),t(),h(13,"ion-input",6),t(),f(14,W,2,0,"ion-text",7),i(15,"ion-item")(16,"ion-label",5),a(17,"Password"),t(),h(18,"ion-input",8),t(),f(19,J,2,0,"ion-text",7),i(20,"ion-button",9),a(21,"Login"),t()()()()),o&2){let s,p;m("translucent",!0),c(4),m("fullscreen",!0),c(2),m("formGroup",n.loginForm),c(8),m("ngIf",((s=n.loginForm.get("email"))==null?null:s.invalid)&&((s=n.loginForm.get("email"))==null?null:s.touched)),c(5),m("ngIf",((p=n.loginForm.get("password"))==null?null:p.invalid)&&((p=n.loginForm.get("password"))==null?null:p.touched)),c(),m("disabled",n.loginForm.invalid)}},dependencies:[G,R,A,j,F,x,P,N,_,E,S,O,V,q,D,k,T,L],styles:[".search-container[_ngcontent-%COMP%]{text-align:center;max-width:800px;margin:2rem auto;padding:1.5rem 2rem;background:#d0e7ff;border-radius:12px;box-shadow:0 4px 8px #0000001a;backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px)}.search-container[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent}"]});let l=r;return l})();export{ie as LoginPage};
