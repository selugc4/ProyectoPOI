import{a as H}from"./chunk-Z6QA5H52.js";import{Aa as E,Ca as u,Cb as z,Da as I,Db as B,Ea as S,Fa as M,G as m,H as i,Ha as b,I as t,J as h,Ja as R,Ka as N,La as T,O as C,Pa as P,Qa as D,X as a,e as v,gb as k,i as p,ja as x,ma as F,mb as G,ob as L,pb as O,qb as V,sa as y,t as d,va as _,w,xb as q,yb as A,z as f,zb as j}from"./chunk-EJZ5YJM5.js";import"./chunk-UDHHHPKJ.js";import"./chunk-JSQDAY7T.js";import"./chunk-PAAW3VWM.js";import"./chunk-VU72VQEI.js";import"./chunk-BU6F7OWR.js";import"./chunk-JZYWOUJL.js";import"./chunk-WHJRDKSF.js";import"./chunk-4U6PRYVA.js";import"./chunk-LB2OG3QI.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{g}from"./chunk-OLRFWS6T.js";function W(s,n){s&1&&(i(0,"ion-text",10),a(1," Ingresa un correo v\xE1lido. "),t())}function J(s,n){s&1&&(i(0,"ion-text",10),a(1," La contrase\xF1a debe tener al menos 6 caracteres. "),t())}var ie=(()=>{let n=class n{constructor(){this.authService=p(H),this.toastController=p(B),this.loadingController=p(z),this.router=p(_),this.registrationForm=new M({email:new b("",[u.required,u.email]),password:new b("",[u.required,u.minLength(6)])})}ngOnInit(){this.router.events.pipe(v(e=>e instanceof y)).subscribe(e=>{e.url.startsWith("/login")||this.resetFields()})}register(){return g(this,null,function*(){if(this.registrationForm.invalid){this.showErrorMessage("Por favor, completa los campos correctamente.");return}let e=yield this.loadingController.create({message:"Registrando los datos...",spinner:"crescent",duration:2e3});yield e.present();let{email:r,password:o}=this.registrationForm.value;try{yield this.authService.register(r,o),this.showInfoMessage("Registro realizado. Redirigiendo..."),setTimeout(()=>{this.router.navigate(["/list"])},2e3)}catch(l){this.showErrorMessage("Error en el registro: "+l.message)}finally{e.dismiss()}})}showErrorMessage(e){return g(this,null,function*(){(yield this.toastController.create({message:e,duration:3e3,position:"bottom",color:"danger"})).present()})}showInfoMessage(e){return g(this,null,function*(){(yield this.toastController.create({message:e,duration:2e3,position:"bottom",color:"success"})).present()})}resetFields(){this.registrationForm.reset()}};n.\u0275fac=function(r){return new(r||n)},n.\u0275cmp=w({type:n,selectors:[["app-register"]],decls:22,vars:6,consts:[[3,"translucent"],[3,"fullscreen"],[1,"search-container"],[1,"transparent-form",3,"ngSubmit","formGroup"],[1,"transparent-form"],["position","stacked"],["type","email","formControlName","email","ngDefaultControl","",1,"transparent-form"],["color","danger",4,"ngIf"],["type","password","formControlName","password","ngDefaultControl","",1,"password"],["expand","full","type","submit",1,"button2",3,"disabled"],["color","danger"]],template:function(r,o){if(r&1&&(i(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),a(3,"register"),t()()(),i(4,"ion-content",1)(5,"div",2)(6,"form",3),C("ngSubmit",function(){return o.register()}),i(7,"h3")(8,"strong"),a(9,"Reg\xEDstrate"),t()(),i(10,"ion-item",4)(11,"ion-label",5),a(12,"Email"),t(),h(13,"ion-input",6),t(),f(14,W,2,0,"ion-text",7),i(15,"ion-item")(16,"ion-label",5),a(17,"Password"),t(),h(18,"ion-input",8),t(),f(19,J,2,0,"ion-text",7),i(20,"ion-button",9),a(21,"Registro"),t()()()()),r&2){let l,c;m("translucent",!0),d(4),m("fullscreen",!0),d(2),m("formGroup",o.registrationForm),d(8),m("ngIf",((l=o.registrationForm.get("email"))==null?null:l.invalid)&&((l=o.registrationForm.get("email"))==null?null:l.touched)),d(5),m("ngIf",((c=o.registrationForm.get("password"))==null?null:c.invalid)&&((c=o.registrationForm.get("password"))==null?null:c.touched)),d(),m("disabled",o.registrationForm.invalid)}},dependencies:[G,L,A,j,F,x,P,R,E,I,S,D,N,T,O,V,q,k],styles:[".search-container[_ngcontent-%COMP%]{text-align:center;max-width:800px;margin:2rem auto;padding:1.5rem 2rem;background:#d0e7ff;border-radius:12px;box-shadow:0 4px 8px #0000001a;backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px)}.search-container[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent}"]});let s=n;return s})();export{ie as RegisterPage};
